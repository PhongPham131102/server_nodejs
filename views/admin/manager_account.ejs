<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="icon" type="image/png" href="/images/logoapp.png" />
    <link rel="stylesheet" href="/stylesheets/admincss.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link href="https://fonts.cdnfonts.com/css/be-vietnam-pro" rel="stylesheet">
    <title>Quản Lý Tài Khoản</title>
</head>

<body>
    <div class="lds-ring">
        <div></div>
        <div></div>
        <div></div>
        <div></div>
    </div>
    <div class="container__main">
        <div class="container__sidebar">
            <div class="sidebar__logo">
                <img src="/images/admin/logo.png" alt="">
            </div>
            <hr>
            <div class="sidebar-item">
                <div class="sideabar__top">
                    <a href="/admin/manageraccount" class="active">
                        Quản lý tài khoản
                    </a>
                    <a href="/admin/managerquestions">
                        Quản lý câu hỏi
                    </a>
                    <div class="logout">
                        Đăng Xuất
                    </div>
                </div>
            </div>

        </div>
        <div class="container__content">
            <header class="content__header">
                <div class="content__header__nav">
                    <div class="content__header__none"></div>
                    <div class="content-info">
                        <div class="content__header__info">
                            <p class="content__info__username">
                                <%=user.fullName%>
                            </p>
                            <p class="content__info__decentralization">Admin</p>
                        </div>
                        <img src="/images/user.png" class="content__avt" />
                    </div>
                </div>
            </header>
            <div class="content__content">
                <div class="content__button__wrapper">
                    <div class="search__box">
                        <input name="search_account" type="text" placeholder="Nhập email để tìm kiếm">
                        <button class="search">
                            <img src="/images/admin/search.png" alt="">
                        </button>
                    </div>
                    <div class="content__button">
                        <button class="button__accept" id="censorship">Duyệt Đăng Ký</button>
                        <button class="button__add_acc" id="add_member">Thêm Mới</button>
                    </div>
                </div>
                <div class="content__table">
                    <div class="content__table__title">
                        <ul class="list__title">
                            <li class="width5">STT</li>

                            <li class="width20">Họ Tên</li>
                            <li class="width20">Email</li>
                            <li class="width10">Phân Quyền</li>
                            <li class="width10">Thao Tác</li>
                        </ul>
                    </div>
                    <%index=0%>
                        <% users.forEach(user => { %>
                            <%index++%>
                                <div class=" content__table__item list_user ">
                                    <ul class="list__item ">
                                        <li class="id_user" style="display: none;">
                                            <%=user._id%>
                                        </li>
                                        <li class="width5 ">
                                            <%=index%>
                                        </li>
                                        <li class="width20 fullname">
                                            <%=user.fullName%>
                                        </li>
                                        <li class="width20 email">
                                            <%=user.email%>
                                        </li>
                                        <li class="width10  role">
                                            <%= (user.isAdmin == true) ? "Admin" : (user.isTeacher == true) ? "Giáo Viên" : "Sinh Viên" %>
                                        </li>
                                        <li class="item__option width10">
                                            <button class="button__edit" id="edit_info">Chỉnh Sửa</button>
                                            <button style="background-color: rgb(156, 1, 1);" class="button__del" id="msg_del">Xóa</button>
                                        </li>
                                    </ul>
                                </div>

                                <% }) %>

                </div>
            </div>
        </div>
    </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.js"></script>
    <script>
        $(document).ready(function() {
            $('.logout').click(function() {
                $.removeCookie('accessToken');
                $.removeCookie('userId');
                window.location.href = '/admin';
            });
            var token = $.cookie("accessToken");
            var usertemporarys = JSON.parse(`<%- usertemporarys %>`);
            //duyệt đăng ký giáo viên
            $("#censorship").on("click", function() {
                $(".content__content").append(`
                                    <div id="wrapper__popup__censorship" class="open__popup">
                                    <div id="popup__censorship">
                                        <div class="popup__title__info">
                                        <div></div>
                                        <p>Danh Sách Giáo Viên Đăng Ký Mới</p>
                                        <button class="close__msg" id="exit_censorship">
                                            <i class="fa-solid fa-xmark"></i>
                                        </button>
                                        </div>
                                        <div class="censorship__table">
                                        <div class="content__table__title">
                                            <ul class="list__item">
                                            <li>STT</li>
                                            <li>Họ Tên</li>
                                            <li>Email</li>
                                            <li>Phân Quyền</li>
                                            <li>Thao Tác</li>
                                            </ul>
                                        </div>
                                        <div class="content__table__body">
                                            ${generateUserRows(usertemporarys)}
                                        </div>
                                        </div>
                                    </div>
                                    </div>
                                `);
                //gán sự kiện khi xóa
                $("#exit_censorship").on("click", function() {
                    $(".content__content").children().last().remove();
                });
                // Gán sự kiện cho nút "Đồng Ý"
                $(".button__edit1").on("click", function() {
                    var userId = $(this).closest(".content__table__item").find("li:first-child").text().trim();
                    for (var i = 0; i < usertemporarys.length; i++) {
                        if (usertemporarys[i]._id == userId) {
                            usertemporarys.splice(i, 1);
                            break; // Thoát khỏi vòng lặp sau khi xóa phần tử
                        }
                    }
                    $(this).closest(".content__table__item").remove();
                    $(".lds-ring").css("display", "flex");
                    $.ajax({
                        url: "/api/userstemporary/convertTeacher",
                        type: "POST",
                        headers: {
                            "Content-Type": "application/json",
                            Authorization: `Bearer ${token}`,
                        },
                        data: JSON.stringify({
                            id: userId,
                        }),
                        success: function(response) {
                            $(".lds-ring").css("display", "none");
                        },
                        error: function(err) {
                            $(".lds-ring").css("display", "none");
                        },
                    });
                });

                // Gán sự kiện cho nút "Xóa"
                $(".button__del").on("click", function() {
                    var userId = $(this).closest(".content__table__item").find("li:first-child").text().trim();
                    for (var i = 0; i < usertemporarys.length; i++) {
                        if (usertemporarys[i]._id == userId) {
                            usertemporarys.splice(i, 1);
                            break; // Thoát khỏi vòng lặp sau khi xóa phần tử
                        }
                    }
                    $(this).closest(".content__table__item").remove();
                    $(".lds-ring").css("display", "flex");
                    $.ajax({
                        url: "/api/userstemporary/deleteaccount",
                        type: "POST",
                        headers: {
                            "Content-Type": "application/json",
                            Authorization: `Bearer ${token}`,
                        },
                        data: JSON.stringify({
                            id: userId,
                        }),
                        success: function(response) {
                            $(".lds-ring").css("display", "none");
                        },
                        error: function(err) {
                            $(".lds-ring").css("display", "none");
                        },
                    });
                });
            });

            function generateUserRows(users) {
                let html = "";
                users.forEach((user, index) => {
                    html += `
                    
                    <div class="content__table__item">
                                <ul class="list__item">
                                    <li style="display: none;">${user._id}</li>
                                    <li>${index + 1}</li>
                                    <li>${user.fullName}</li>
                                    <li>${user.email}</li>
                                    <li>Giáo Viên</li>
                                    <li class="item__option">
                                        <button class="button__edit1" id="done_account">Đồng Ý</button>
                                        <button class="button__del" id="delete_account">Xóa</button>
                                    </li>
                                </ul>
                            </div>
                        `;
                });
                return html;
            }


            //thêm mới 1 người dùng
            $("#add_member").on("click", function() {
                $(".content__content").append(` <div id="add_user_table">
                    <div id="popup__add__member1">
                        <div class="popup__title__info ">
                            <div></div>
                            <p>Thêm Tài Khoản Mới</p>
                          
                        </div>
                       
                        <div class="popup__content__info ">
                            <div class="info__detail1 ">
                                <label for=" ">Email: </label>
                                <input name="email" type="text " placeholder="......@gmail.com ">
                            </div>
                            <p class="validate_email" style="padding-left:11vw;  font-size: 23; font-weight: 600; color: red;display: none;justify-content: start;align-items: center;">email hoặc mật khẩu không đúng</p>
                            <div class="info__detail1 ">
                                <label for=" ">Họ và Tên: </label>
                                <input name="fullname" type="text " placeholder="Họ và tên người dùng ">
                              
                            </div>
                            <p class="validate_fullName" style="padding-left:11vw;  font-size: 23; font-weight: 600; color: red;display: none;justify-content: start;align-items: center;">email hoặc mật khẩu không đúng</p>
                            <div class="info__detail1 ">
                                <label for=" ">Phân Quyền: </label>
                                <select id="selected_role">
                                    <option value="Teacher">Giáo Viên</option>
                                    <option value="Admin">Admin</option>
                                        <option value="Student">Sinh Viên</option>
                                </select>
                            </div>

                            <div class="info__detail1 ">
                                <label for=" ">Mật khẩu: </label>
                                <input name="password" type="password " placeholder="Mật khẩu ">
                            </div>
                            <p class="validate_passWord" style="padding-left:11vw;  font-size: 23; font-weight: 600; color: red;display: none;justify-content: start;align-items: center;">email hoặc mật khẩu không đúng</p>
                            <div class="button__op1">
                                <button id="add_user">Thêm Mới</button>
                                <button id="cancel_add_user" id="exit ">Hủy</button>
                            </div>
                        </div>

                    </div>
                </div>`);
                $('#add_user').on('click', function() {
                    var email = $('input[name="email"]').val().trim();
                    var fullName = $('input[name="fullname"]').val().trim();
                    var password = $('input[name="password"]').val().trim();
                    var role = $("#selected_role").val();
                    var isAdmin = false;
                    var isTeacher = false;
                    if (role == "Student") {
                        isAdmin = false;
                        isTeacher = false;
                    } else if (role == "Admin") {
                        isAdmin = true;
                        isTeacher = false;
                    } else {
                        isAdmin = false;
                        isTeacher = true;
                    }
                    var isValidate = true;
                    // Kiểm tra và validate email
                    if (!validateEmail(email)) {
                        isValidate = false;
                        $('.validate_email').css('display', 'flex').text('Email không đúng định dạng');
                        setTimeout(function() {
                            $('.validate_email').hide();
                        }, 1500);
                    }

                    // Kiểm tra và validate fullName
                    if (fullName.length === 0) {
                        isValidate = false;
                        $('.validate_fullName').css('display', 'flex').text('Vui lòng nhập họ và tên');
                        setTimeout(function() {
                            $('.validate_fullName').hide();
                        }, 1500);
                    }

                    // Kiểm tra và validate password
                    if (password.length < 8) {
                        isValidate = false;
                        $('.validate_passWord').css('display', 'flex').text('Mật khẩu phải có ít nhất 8 ký tự');
                        setTimeout(function() {
                            $('.validate_passWord').hide();
                        }, 1500);
                    }
                    if (isValidate) {
                        var userData = {
                            fullName: fullName,
                            email: email,
                            password: password,
                            isTeacher: isTeacher,
                            isAdmin: isAdmin,
                        };
                        $(".lds-ring").css("display", "flex");
                        $.ajax({
                            url: "/api/users/register",
                            type: "POST",
                            headers: {
                                "Content-Type": "application/json",
                                Authorization: `Bearer ${token}`,
                            },
                            data: JSON.stringify(userData),
                            success: function(response) {
                                $(".lds-ring").css("display", "none");
                                var length = $(".list_user").length;
                                $(".content__table").append(` <div class=" content__table__item list_user ">
                                    <ul class="list__item ">
                                        <li class="id_user" style="display: none;">
                                            ${response.user._id}
                                        </li>
                                        <li class="width5 ">
                                            ${length+1}
                                        </li>
                                        <li class="width20 fullname">
                                            ${response.user.fullName}
                                        </li>
                                        <li class="width20 email">
                                            ${response.user.email}
                                        </li>
                                        <li class="width10  role">
                                            ${ (response.user.isAdmin == true) ? "Admin" : (response.user.isTeacher == true) ? "Giáo Viên" : "Sinh Viên" }
                                        </li>
                                        <li class="item__option width10">
                                            <button class="button__edit" id="edit_info" >Chỉnh Sửa</button>
                                            <button style="background-color: rgb(156, 1, 1);" class="button__del" id="msg_del" >Xóa</button>
                                        </li>
                                    </ul>
                                </div>`);
                                // <button class="button__edit" id="edit_info" data-fullname="${response.user.fullName }" data-email="${response.user.email }" data-role=""$ response.user.isAdmin == true) ? 'Admin' "$ response.user.isTeacher == true) ? 'Teacher' : 'Student' }" data-id="${response.user._id.toString().trim() }">Chỉnh Sửa</button>
                                //             <button class="button__del" id="msg_del" data-fullname="${response.user.fullName }" data-email="${response.user.email }" data-role=""$ response.user.isAdmin == true) ? 'Admin' "$ response.user.isTeacher == true) ? 'Teacher' : 'Student' }" data-id="${response.user._id.toString().trim() }">Xóa</button>
                                $(".content__content").children().last().remove();
                                $(".content__content").append(`
                                                    <div id="wrapper__popup__accept" class="infor-success open__popup ">
                                                        <div id="popup__accept">
                                                            <div class="popup__title">
                                                                <img src="/images/admin/yes.png" alt="">
                                                                <p>Thông Báo </p>
                                                            </div>
                                                            <div class="popup__content">
                                                                <p class="content-info" style="display: flex; justify-content: center;">Thêm mới tài khoản thành công.</p>
                                                                <div class="popup__op">
                                                                    <button type="button" id="exit-info1" class="turn_off_info">Thoát</button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>`);
                            },
                            error: function(xhr, status, error) {
                                $(".lds-ring").css("display", "none");

                                $('.validate_email').css('display', 'flex').text('Email đã tồn tại');
                                setTimeout(function() {
                                    $('.validate_email').hide();
                                }, 1500);
                            }
                        });
                    }

                });

                function validateEmail(email) {
                    // Hàm kiểm tra định dạng email
                    var emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                    return emailPattern.test(email);
                }
                $("#cancel_add_user").on("click", function() {
                    $(".content__content").children().last().remove();
                });
            });


            //hàm xóa
            $('.content__table').on('click', '.button__del', function() {
                var $listItem = $(this).closest('.list__item'); // Tìm phần tử gần nhất có class "list__item"
                var id = $listItem.find('.id_user').text().trim(); // Lấy giá trị của phần tử có class "id_user"
                console.log(id);
                var fullName = $listItem.find('.fullname').text().trim(); // Lấy giá trị của phần tử có class "fullname"
                var email = $listItem.find('.email').text().trim(); // Lấy giá trị của phần tử có class "email"
                var role = $listItem.find('.role').text().trim(); // Lấy giá trị của phần tử có class "role"
                $(".content__content").append(`<div id="delete_infor" class="open__popup">
                    <div id="popup">
                        <div class="popup__title ">
                            <p>Thông báo </p>
                        </div>
                        <div class="popup__content ">
                            <p>Bạn có chắc muốn xóa người dùng có thông tin:</p>
                            <ul class="info__del ">
                                <li>Họ tên: ${fullName}</li>
                                <li>Email:  ${email}</li>
                                <li>Vai trò:  ${role}</li>
                            </ul>
                            <div class="popup__op ">
                                <button type="button " id="accept_delete">Xác nhận</button>
                                <button type="button " id="exit_delete">Hủy</button>
                            </div>
                        </div>
                    </div>
                </div>`);
                $("#exit_delete").on("click", function() {
                    $(".content__content").children().last().remove();
                })
                $("#accept_delete").on("click", function() {
                    $(".lds-ring").css("display", "flex");
                    $.ajax({
                        url: `/api/users/delete/${id}`,
                        type: "DELETE",
                        headers: {
                            "Authorization": "Bearer " + token,
                        },
                        success: function(response) {
                            $(".lds-ring").css("display", "none");
                            $('.list_user').each(function() {
                                var roleName = "";

                                var firstLiValue = $(this).find('.list__item li:first-child').text().trim();
                                if (firstLiValue == id) {
                                    $(this).remove();
                                }
                                $(".content__content").children().last().remove();
                                $(".content__content").append(`
                                                    <div id="wrapper__popup__accept" class="infor-success open__popup ">
                                                        <div id="popup__accept">
                                                            <div class="popup__title">
                                                                <img src="/images/admin/yes.png" alt="">
                                                                <p>Thông Báo </p>
                                                            </div>
                                                            <div class="popup__content">
                                                                <p class="content-info" style="display: flex; justify-content: center;">Cập Nhật Thành Công</p>
                                                                <div class="popup__op">
                                                                    <button type="button" id="exit-info1" class="turn_off_info">Thoát</button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>`);

                            });
                            $(".content__content").children().last().remove();
                            $(".content__content").append(`
                                                    <div id="wrapper__popup__accept" class="infor-success open__popup">
                                                        <div id="popup__accept">
                                                            <div class="popup__title">
                                                                <img src="/images/admin/yes.png" alt="">
                                                                <p>Thông Báo </p>
                                                            </div>
                                                            <div class="popup__content">
                                                                <p class="content-info" style="display: flex; justify-content: center;">Xóa thành công.</p>
                                                                <div class="popup__op">
                                                                    <button type="button" id="exit-info1" class="turn_off_info">Thoát</button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>`);
                        },
                        error: function(xhr, status, error) {
                            $(".lds-ring").css("display", "none");
                            $(".content__content").children().last().remove();
                            $(".content__content").append(`
                                                    <div id="wrapper__popup__accept" class="infor-success open__popup">
                                                        <div id="popup__accept">
                                                            <div class="popup__title">
                                                                <img style="width:50px" src="/images/admin/error.png" alt="">
                                                                <p>Thông Báo </p>
                                                            </div>
                                                            <div class="popup__content">
                                                                <p class="content-info" style="display: flex; justify-content: center;">Xóa thất bại.</p>
                                                                <div class="popup__op">
                                                                    <button type="button" id="exit-info1" class="turn_off_info">Thoát</button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>`);
                        }
                    });
                })
            });
            var i = 1;
            //hàm khi nhấn chọn chỉnh sửa
            $('.content__table').on('click', '.button__edit', function() {

                var $listItem = $(this).closest('.list__item'); // Tìm phần tử gần nhất có class "list__item"
                var id = $listItem.find('.id_user').text().trim(); // Lấy giá trị của phần tử có class "id_user"
                var fullName = $listItem.find('.fullname').text().trim(); // Lấy giá trị của phần tử có class "fullname"
                var email = $listItem.find('.email').text().trim(); // Lấy giá trị của phần tử có class "email"
                var role = $listItem.find('.role').text().trim(); // Lấy giá trị của phần tử có class "role"
                $(".content__content").append(`
                <div id="wrapper__popup__11">
                    <div id="popup__edit1">
                        <div class="popup__title__info1">
                            <div></div>
                            <p>Thông Tin Người Dùng</p>
                            <button class="close__msg" id="exit_update1"><i class="fa-solid fa-xmark "></i></button>
                        </div>
                        <div class="popup__content__info1">
                            <input disabled style="display: none;" type="text" name="id_edit">
                            <div class="info__detail1">
                                <label for=" ">Email: </label>
                                <input name="editEmail" type="text ">
                            </div>

                            <div class="info__detail1">
                                <label for=" ">Họ và Tên: </label>
                                <input name="fullName" type="text">
                            </div>

                            <div class="info__detail1">
                                <label for=" ">Phân Quyền: </label>
                                <select id="roleSelect">
                                    <option value="Admin">Admin</option>
                                    <option value="Teacher">Giáo Viên</option>
                                    <option value="Student">Sinh Viên</option>
                                </select>
                            </div>

                            <div class="button__op11">
                                <button class="edit-info" id="update1">Cập Nhật</button>
                                <button class="cancel1" id="exit_update1">Hủy</button>
                            </div>
                        </div>

                    </div>
                </div>`);
                $("input[name='editEmail']").val(email);
                $("input[name='fullName']").val(fullName);
                $("input[name='id_edit']").val(id);
                if (role == "Sinh Viên") {
                    $(`#roleSelect option[value="Student"]`).prop("selected", true);
                } else if (role == "Admin") {
                    $(`#roleSelect option[value="Admin"]`).prop("selected", true);
                } else if (role == "Giáo Viên") {
                    $(`#roleSelect option[value="Teacher"]`).prop("selected", true);
                }

                $("#wrapper__popup__11").addClass("open__popup"); //đóng bảng chỉnh sửa
                $(".close__msg").on('click', function() {
                        $("#wrapper__popup__11").removeClass("open__popup");
                    })
                    //đóng bảng chỉnh sửa
                $(".cancel1").on('click', function() {
                        $("#wrapper__popup__11").removeClass("open__popup");
                    }) //hàm khi nhấn cập nhật
                $(".edit-info").on("click", function() {

                    var fullName1 = $("input[name='fullName']").val().trim();
                    var email1 = $("input[name='editEmail']").val().trim();
                    var selectedValue1 = $('#roleSelect').val();
                    var id_user1 = $("input[name='id_edit']").val().trim();
                    var isAdmin1 = false;
                    var isTeacher1 = false;
                    if (selectedValue1 == "Student") {
                        isAdmin1 = false;
                        isTeacher1 = false;
                    } else if (selectedValue1 == "Admin") {
                        isAdmin1 = true;
                        isTeacher1 = false;
                    } else {
                        isAdmin1 = false;
                        isTeacher1 = true;
                    }
                    $(".lds-ring").css("display", "flex");
                    $.ajax({
                        url: "/api/users/update",
                        type: "POST",
                        headers: {
                            "Content-Type": "application/json",
                            Authorization: `Bearer ${token}`,
                        },
                        data: JSON.stringify({
                            id: id_user1,
                            fullName: fullName1,
                            email: email1,
                            isAdmin: isAdmin1,
                            isTeacher: isTeacher1,
                        }),
                        success: function(response) {
                            $(".lds-ring").css("display", "none");
                            $(".content__content").children().last().remove();
                            $(".content__content").append(`
                                                    <div id="wrapper__popup__accept" class="infor-success open__popup ">
                                                        <div id="popup__accept">
                                                            <div class="popup__title">
                                                                <img src="/images/admin/yes.png" alt="">
                                                                <p>Thông Báo </p>
                                                            </div>
                                                            <div class="popup__content">
                                                                <p class="content-info" style="display: flex; justify-content: center;">Cập Nhật Thành Công</p>
                                                                <div class="popup__op">
                                                                    <button type="button" id="exit-info1" class="turn_off_info">Thoát</button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>`);
                            $('.list_user').each(function() {
                                var roleName = "";
                                var firstLiValue = $(this).find('.list__item li:first-child').text().trim();

                                if (firstLiValue == id_user1) {
                                    console.log(firstLiValue);
                                    $(this).find('.list__item li.fullname').text(fullName1);
                                    $(this).find('.list__item li.email').text(email1);
                                    var editButton = $(this).find('.list__item .button__edit');
                                    editButton.attr('data-fullname', `${fullName1}`);
                                    editButton.attr('data-email', `${email1}`);
                                    if (isAdmin1 == true) {
                                        $(this).find('.list__item li.role').text("Admin");
                                        editButton.attr('data-role', `Admin`);
                                    } else if (isTeacher1 == true) {
                                        $(this).find('.list__item li.role').text("Giáo Viên");
                                        editButton.attr('data-role', `Giáo Viên`);
                                    } else {
                                        $(this).find('.list__item li.role').text("Sinh Viên");
                                        editButton.attr('data-role', `Sinh Viên`);
                                    }
                                }
                            });

                        },
                        error: function(err) {
                            $(".lds-ring").css("display", "none");
                            $(".content__content").children().last().remove();
                            $(".content__content").append(`
                                                    <div id="wrapper__popup__accept" class="infor-success open__popup">
                                                        <div id="popup__accept">
                                                            <div class="popup__title">
                                                                <img style="width:50px" src="/images/admin/error.png" alt="">
                                                                <p>Thông Báo </p>
                                                            </div>
                                                            <div class="popup__content">
                                                                <p class="content-info" style="display: flex; justify-content: center;">địa chỉ email đã tồn tại.</p>
                                                                <div class="popup__op">
                                                                    <button type="button" id="exit-info1" class="turn_off_info">Thoát</button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>`);

                        }
                    })
                });

            });
            //đóng thông báo 
            $(".content__content").on("click", ".turn_off_info", function() {
                $(".content__content").children().last().remove();
            });
            // Lắng nghe sự kiện thay đổi giá trị của input
            $("input[name='search_account']").on("input", function() {
                var searchValue = $(this).val().trim().toLowerCase();

                // Lặp qua từng phần tử có class "list_user"
                $(".list_user").each(function() {
                    var emailValue = $(this).find(".email").text().trim().toLowerCase();

                    // Kiểm tra nếu giá trị email chứa giá trị tìm kiếm
                    if (emailValue.includes(searchValue)) {
                        $(this).show(); // Hiển thị phần tử
                    } else {
                        $(this).hide(); // Ẩn phần tử
                    }
                });
            });
        });
    </script>
</body>

</html>